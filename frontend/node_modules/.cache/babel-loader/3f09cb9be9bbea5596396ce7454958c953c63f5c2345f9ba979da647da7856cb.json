{"ast":null,"code":"import React,{useEffect}from\"react\";import Header from\"../components/header\";import Footer from\"../components/footer\";import{useLocation}from\"react-router-dom\";import{connect}from\"react-redux\";import{checkAuthenticated,load_user,googleAuth}from\"../actions/auth\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Layout=function Layout(props){var location=useLocation;useEffect(function(){var currentURL=window.location.href;var urlParams=new URLSearchParams(new URL(currentURL).search);var state=urlParams.get(\"state\")?urlParams.get(\"state\"):null;var code=urlParams.get(\"code\")?urlParams.get(\"code\"):null;if(state&&code){props.googleAuth(state,code);}else{props.checkAuthenticated();props.load_user();}},[location,props]);return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Header,{}),props.children,/*#__PURE__*/_jsx(Footer,{})]});};export default connect(null,{checkAuthenticated:checkAuthenticated,load_user:load_user,googleAuth:googleAuth})(Layout);","map":{"version":3,"names":["React","useEffect","Header","Footer","useLocation","connect","checkAuthenticated","load_user","googleAuth","jsx","_jsx","jsxs","_jsxs","Layout","props","location","currentURL","window","href","urlParams","URLSearchParams","URL","search","state","get","code","children"],"sources":["D:/Japhe/Code/django-react/primermovies/frontend/src/hocs/Layout.js"],"sourcesContent":["import React, { useEffect } from \"react\";\r\nimport Header from \"../components/header\";\r\nimport Footer from \"../components/footer\";\r\nimport { useLocation } from \"react-router-dom\";\r\nimport { connect } from \"react-redux\";\r\nimport { checkAuthenticated, load_user, googleAuth } from \"../actions/auth\";\r\n\r\nconst Layout = (props) => {\r\n  let location = useLocation;\r\n\r\n  useEffect(() => {\r\n    const currentURL = window.location.href;\r\n\r\n    const urlParams = new URLSearchParams(new URL(currentURL).search);\r\n\r\n    const state = urlParams.get(\"state\") ? urlParams.get(\"state\") : null;\r\n    const code = urlParams.get(\"code\") ? urlParams.get(\"code\") : null;\r\n\r\n    if (state && code) {\r\n      props.googleAuth(state, code);\r\n    } else {\r\n      props.checkAuthenticated();\r\n      props.load_user();\r\n    }\r\n  }, [location, props]);\r\n\r\n  return (\r\n    <div>\r\n      <Header />\r\n      {props.children}\r\n      <Footer />\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default connect(null, { checkAuthenticated, load_user, googleAuth })(\r\n  Layout\r\n);\r\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,KAAQ,OAAO,CACxC,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,MAAO,CAAAC,MAAM,KAAM,sBAAsB,CACzC,OAASC,WAAW,KAAQ,kBAAkB,CAC9C,OAASC,OAAO,KAAQ,aAAa,CACrC,OAASC,kBAAkB,CAAEC,SAAS,CAAEC,UAAU,KAAQ,iBAAiB,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE5E,GAAM,CAAAC,MAAM,CAAG,QAAT,CAAAA,MAAMA,CAAIC,KAAK,CAAK,CACxB,GAAI,CAAAC,QAAQ,CAAGX,WAAW,CAE1BH,SAAS,CAAC,UAAM,CACd,GAAM,CAAAe,UAAU,CAAGC,MAAM,CAACF,QAAQ,CAACG,IAAI,CAEvC,GAAM,CAAAC,SAAS,CAAG,GAAI,CAAAC,eAAe,CAAC,GAAI,CAAAC,GAAG,CAACL,UAAU,CAAC,CAACM,MAAM,CAAC,CAEjE,GAAM,CAAAC,KAAK,CAAGJ,SAAS,CAACK,GAAG,CAAC,OAAO,CAAC,CAAGL,SAAS,CAACK,GAAG,CAAC,OAAO,CAAC,CAAG,IAAI,CACpE,GAAM,CAAAC,IAAI,CAAGN,SAAS,CAACK,GAAG,CAAC,MAAM,CAAC,CAAGL,SAAS,CAACK,GAAG,CAAC,MAAM,CAAC,CAAG,IAAI,CAEjE,GAAID,KAAK,EAAIE,IAAI,CAAE,CACjBX,KAAK,CAACN,UAAU,CAACe,KAAK,CAAEE,IAAI,CAAC,CAC/B,CAAC,IAAM,CACLX,KAAK,CAACR,kBAAkB,CAAC,CAAC,CAC1BQ,KAAK,CAACP,SAAS,CAAC,CAAC,CACnB,CACF,CAAC,CAAE,CAACQ,QAAQ,CAAED,KAAK,CAAC,CAAC,CAErB,mBACEF,KAAA,QAAAc,QAAA,eACEhB,IAAA,CAACR,MAAM,GAAE,CAAC,CACTY,KAAK,CAACY,QAAQ,cACfhB,IAAA,CAACP,MAAM,GAAE,CAAC,EACP,CAAC,CAEV,CAAC,CAED,cAAe,CAAAE,OAAO,CAAC,IAAI,CAAE,CAAEC,kBAAkB,CAAlBA,kBAAkB,CAAEC,SAAS,CAATA,SAAS,CAAEC,UAAU,CAAVA,UAAW,CAAC,CAAC,CACzEK,MACF,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}